{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="shortcut icon" href="./images/Logo-Velaroma-Sin-Fondo.webp">

  <meta name="description" content="" />

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'css/tiny-slider.css' %}">
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  <!-- Viejo -->
  <title>{% block tittle %}{% endblock %}</title>
</head>


<body class="container-body">
  <!-- Loader -->
  <div id="loaderContainer" class="loader-container">
    <div class="loader"></div>
  </div>



  <!-- Start Header/Navigation -->
  <nav class="navbar custom-navbar navbar-expand-md navbar-dark bg-dark" arial-label="Furni navigation bar"
    id="seccion1">
    <div class="container">
      <!-- Logo que se mostrará en pantallas grandes -->
      <a class="navbar-brand d-none d-md-block" href="">
        <img src="{% static 'images/Logo-Velaroma-Sin-Fondo.webp' %}" width="80" height="80" alt="Logo">
      </a>
      <!-- Dropdown que se mostrará en pantallas pequeñas -->
      <a class="nav-link dropdown-toggle d-block d-md-none" href="#" id="userDropdown" role="button"
        data-bs-toggle="dropdown" aria-expanded="false">
        <img src="{% static 'images/user.svg' %}" alt="User">
      </a>

      <a class="navbar-brand custom-navbar-brand" href="">Vela<span>roma</span></a>

      <ul class="dropdown-menu" aria-labelledby="userDropdown">
        <!-- Contenido del menú desplegable -->
        {% if user.is_authenticated %}
        <li><a class="dropdown-item" href="#">{{ user.first_name }}</a></li>
        <li><a class="dropdown-item" href="#">Configuración</a></li>
        <li><a class="dropdown-item" href="logout">Cerrar Sesión</a></li>
        {% else %}
        <li><a class="dropdown-item" onclick="openLoginModal()">Iniciar sesión</a></li>
        <li><a class="dropdown-item" href="{% url 'register_user' %}">Registrarse</a></li>
        {% endif %}
      </ul>

      <!-- Botón del toggler para pantallas pequeñas -->
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsFurni"
        aria-controls="navbarsFurni" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarsFurni">
        <ul class="custom-navbar-nav navbar-nav ms-auto mb-2 mb-md-0">
          <li class="nav-item active">
            <a class="nav-link" href="">Inicio</a>
          </li>
          <li><a class="nav-link" href="shop.html">Tienda</a></li>
          <li><a class="nav-link" href="about.html">Acerca</a></li>
          <li><a class="nav-link" href="services.html">Servicios</a></li>
          <li><a class="nav-link" href="contact.html">Contactanos</a></li>
        </ul>

        <ul class="custom-navbar-cta navbar-nav mb-2 mb-md-0 ms-5">
          <!-- Dropdown que se mostrará en pantallas grandes -->
          <li class="nav-item dropdown d-none d-md-block">
            <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown"
              aria-expanded="false">
              <img src="{% static 'images/user.svg' %}" alt="User">
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
              <!-- Contenido del menú desplegable -->
              {% if user.is_authenticated %}
              <li><a class="dropdown-item" href="#">{{ user.first_name }}</a></li>
              <li><a class="dropdown-item" href="#">Configuración</a></li>
              <li><a class="dropdown-item" href="logout">Cerrar Sesión</a></li>
              {% else %}
              <li><a class="dropdown-item" onclick="openLoginModal()" style="cursor: pointer;">Iniciar sesión</a></li>
              <li><a class="dropdown-item" href="{% url 'register_user' %}">Registrarse</a></li>
              {% endif %}
            </ul>
          </li>
        </ul>

      </div>
    </div>
  </nav>
  <!-- End Header/Navigation -->



  <!-- Bootstrap JS -->
  {% block body %}

  {% endblock %}


  <!-- Start shopping Cart -->
  <div class="shopping-cart" id="shopping-cart" data-product-count="0">
    <span><img src="{% static 'images/cart.png' %}" alt="" width="25px" height="25px"></span>
  </div>
  <!-- Ending shopping Cart -->

  <!-- start off canvas to show cart items -->

  <div class="offcanvas offcanvas-end" tabindex="-1" id="offCanvasShoppingList" aria-labelledby="offcanvasRightLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="offcanvasRightLabel">Carrito de compras</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body"></div>
  </div>

  <script>

    document.getElementById('shopping-cart').addEventListener("click", function () {
      var offcanvasBody = document.querySelector('.offcanvas .offcanvas-body');

      var offcanvasElement = document.getElementById('offCanvasShoppingList');
      var bsOffcanvas = new bootstrap.Offcanvas(offcanvasElement);

      if (offcanvasBody.innerHTML.trim() === '') {
        offcanvasBody.innerHTML = '<div style="display: flex; justify-content: center; align-items: center; height: 100%;"><p>El carrito aún está vacío</p></div>';
      } else {
        // El offcanvas no está vacío, no hacer nada
      }

      bsOffcanvas.show();

    });







  </script>

  <!-- end off canvas to show cart items -->

  <!-- Start scroll bar -->
  <div id="progress">
    <span id="progress-value"><img src="{% static 'images/arrow_up.png' %}" alt="" width="25px" height="25px"></span>
    <script>
      let calcScrollValue = () => {
        let scrollProgress = document.getElementById("progress");
        let progressValue = document.getElementById("progress-value");
        let pos = document.documentElement.scrollTop;
        let calcHeight =
          document.documentElement.scrollHeight -
          document.documentElement.clientHeight;
        let scrollValue = Math.round((pos * 100) / calcHeight);
        if (pos > 100) {
          scrollProgress.style.display = "grid";
        } else {
          scrollProgress.style.display = "none";
        }
        scrollProgress.addEventListener("click", () => {
          document.documentElement.scrollTop = 0;
        });
        scrollProgress.style.background = `conic-gradient(#ff7373 ${scrollValue}%, #d7d7d7 ${scrollValue}%)`;
      };

      document.addEventListener("DOMContentLoaded", calcScrollValue); // Modificación

      window.onscroll = calcScrollValue;


    </script>
  </div>
  <!-- End scroll bar -->
  <!-- Start Footer Section -->
  <footer class="pie-de-pagina">
    <div class="grupo-1">
      <div class="box box-logo">
        <div class="logo-footer">
          <a href="#" class="text-logo">Vela<span>roma</span>
          </a>
        </div>
      </div>
      <div class="box">
        <h2>Sobre <span>nosotros</span></h2>
        <p>Somos CoffeShop un negocio dedicado a la producción y comercialización de café, cultivado en las mejoras
          zonas cafetaleras de Nicaragua.</p>
        <p><a class="footer-text-map" href="https://goo.gl/maps/6wVeDe94XpyQnCTX9"><i class="fa-solid fa-map-pin"
              style="color: #6d1f00;"></i> Ciudad Jardín, Calle 13 Sur Oeste</a></p>
      </div>
      <div class="box">
        <h2>Siguenos en nuestras <span>redes sociales</span></h2>
        <div class="red-social">
          <a href="https://youtu.be/dQw4w9WgXcQ" class="fa fa-facebook"></a>
          <a href="https://youtu.be/dQw4w9WgXcQ" class="fa fa-instagram"></a>
          <a href="https://youtu.be/dQw4w9WgXcQ" class="fa fa-twitter"></a>
          <a href="https://youtu.be/dQw4w9WgXcQ" class="fa fa-youtube"></a>
        </div>
      </div>
    </div>
    <div class="grupo-2">
      <small>&copy; 2023 <b>Medina Jhonatan <b><span>- Copyright LOLOLOL</span></b></b></small>
    </div>
  </footer>

  <!-- Modal Login -->
  <div class="modal fade" id="iniciosesion2" tabindex="-1" aria-labelledby="iniciosesion2Title" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-body">
          <div class="modal-title custom-modal-title">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="loginlogo text-center">
            <img src="{% static 'images/Logo-Velaroma-Sin-FondoPEQUE.png' %}" alt="">
          </div>
          <form class="text-center custom-form" action="/login_usuario2" method="POST">
            <h5 class="TittleLogin">Inicio de <span>sesión</span></h5>
            <div class="custom-paragraph">
              <p>Por favor introduzca sus datos a continuación: </p>
            </div>
            <div class="input-container">
              <input type="email" id="email" placeholder=" " required="">
              <label for="input" class="label">Correo electrónico</label>
              <div class="underline"></div>
            </div>
            <div class="input-container input-pass">
              <input type="password" id="passw" name="password" placeholder=" " required="">
              <label for="input" class="label">Contraseña</label>
              <div class="lostpass text-lg-end">
                <a class="text-lg-start" href="">¿Ha olvidado su
                  contraseña?</a>
              </div>
              <div class="underline"></div>
            </div>
            <button class="btn btn-block" type="submit">Iniciar sesión</button>
            <p class="mt-2">¿No tienes una cuenta? <a href="{% url 'register_user' %}">Regístrate</a></p>
            <div class="container custom-container-o">
              <div class="row custom-row">
                <div class="col">
                  <hr>
                </div>
                O
                <div class="col">
                  <hr>
                </div>
              </div>
            </div>
            <div class="custom-button">
              <a class="buttonGoogle" id="btnRegisterGoogle" href="{% url 'social:begin' 'google-oauth2' %}">
                <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid" viewBox="0 0 256 262">
                  <path fill="#4285F4"
                    d="M255.878 133.451c0-10.734-.871-18.567-2.756-26.69H130.55v48.448h71.947c-1.45 12.04-9.283 30.172-26.69 42.356l-.244 1.622 38.755 30.023 2.685.268c24.659-22.774 38.875-56.282 38.875-96.027">
                  </path>
                  <path fill="#34A853"
                    d="M130.55 261.1c35.248 0 64.839-11.605 86.453-31.622l-41.196-31.913c-11.024 7.688-25.82 13.055-45.257 13.055-34.523 0-63.824-22.773-74.269-54.25l-1.531.13-40.298 31.187-.527 1.465C35.393 231.798 79.49 261.1 130.55 261.1">
                  </path>
                  <path fill="#FBBC05"
                    d="M56.281 156.37c-2.756-8.123-4.351-16.827-4.351-25.82 0-8.994 1.595-17.697 4.206-25.82l-.073-1.73L15.26 71.312l-1.335.635C5.077 89.644 0 109.517 0 130.55s5.077 40.905 13.925 58.602l42.356-32.782">
                  </path>
                  <path fill="#EB4335"
                    d="M130.55 50.479c24.514 0 41.05 10.589 50.479 19.438l36.844-35.974C195.245 12.91 165.798 0 130.55 0 79.49 0 35.393 29.301 13.925 71.947l42.211 32.783c10.59-31.477 39.891-54.251 74.414-54.251">
                  </path>
                </svg>
                Iniciar sesión con Google
              </a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Funcion para las animaciones del loader
    window.addEventListener('load', function () {
      document.getElementById('loaderContainer').style.display = 'none';

      // Selecciona el body
      var body = document.body;



      // Elimina la clase "container-body"
      body.classList.remove('container-body');

      // También puedes eliminar el pseudo-elemento :before
      var beforeElement = document.querySelector('body:before');
      if (beforeElement) {
        beforeElement.parentNode.removeChild(beforeElement);
      }



    });


    // Abrir modal con url
    window.onload = function () {
      // Verificar si hay un parámetro en la URL indicando que se debe abrir el modal
      const urlParams = new URLSearchParams(window.location.search);
      const openModal = urlParams.get('openModal');

      // Si el parámetro está presente y tiene un valor específico, abrir el modal
      if (openModal === 'true') {

        // Abrir el modal
        openLoginModal();

        // Remover el parámetro 'openModal' de la URL
        const newURL = window.location.href.split('?')[0];
        window.history.replaceState({}, document.title, newURL);

      }
    };
    // Con esto abro el modal de inicio de sesión
    function openLoginModal() {
      var myModal = new bootstrap.Modal(document.getElementById('iniciosesion2'));
      myModal.show();
    }
  </script>

  <!-- End Footer Section -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>

  <!-- CDN Font awesome -->
  <script src="https://kit.fontawesome.com/9b8b75d2fb.js" crossorigin="anonymous"></script>


  <!-- Custom JS -->
  <script src="https://unpkg.com/typewriter-effect@latest/dist/core.js"></script>

  {% block customJS %}
  {% endblock %}
</body>

</html>